<header class="dash-header">
  <div class="title">
    <h1>Sistema de Gerenciamento de Usuários</h1>
    <p>Gerencie os usuários do sistema de forma eficiente</p>
  </div>

  <div class="account">
    @if (currentUser) {
      <div class="user">
        <strong>{{ currentUser.name }}</strong>
        <span class="muted">{{ currentUser.email }}</span>
      </div>
      <button type="button" class="btn ghost" (click)="logout()">Sair</button>
    } @else {
      <div class="user">
        <strong>Visitante</strong>
        <span class="muted">Sem sessão ativa</span>
      </div>
    }
  </div>
</header>

<main class="dash-grid">
  <section class="card" #formSection>
    <header class="card-head">
      <h2>Cadastro / edição</h2>
    </header>
    <div class="card-body">
      <app-usuario-form />
    </div>
  </section>

  <section class="card">
    <header class="card-head">
      <h2>Usuários</h2>
      <span class="pill" aria-live="polite">
        {{ totalUsuarios }} {{ totalUsuarios === 1 ? 'registro' : 'registros' }}
      </span>
    </header>
    <div class="card-body">
      <!-- ✅ recebe o total da lista e trata o botão "novo" -->
      <app-usuario-list (countChange)="onCountChange($event)" (novo)="focusNovo()" />
    </div>
  </section>
</main>
